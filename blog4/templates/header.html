<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}</title>
  {% if page.description %}<meta name="description" content="{{ page.description }}">{% endif %}
  {{ og_all_tags }}

  <!-- Google Fonts: Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#059669',
            'primary-light': '#34d399',
            surface: '#f0fdf4',
            'surface-alt': '#e6f7ed',
            border: '#c6e9d3',
            muted: '#4a6a4a',
          },
          fontFamily: {
            mono: ['ui-monospace', '"SFMono-Regular"', 'Consolas', '"Liberation Mono"', 'Menlo', 'monospace'],
            sans: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      },
    }
  </script>

  <style type="text/tailwindcss">
    /* Prose: markdown rendered content */
    .prose h1, .prose h2, .prose h3, .prose h4 {
      @apply font-mono font-bold leading-tight;
    }
    .prose h1 { @apply text-2xl mb-4 mt-0; }
    .prose h2 { @apply text-xl mt-8 mb-3; }
    .prose h3 { @apply text-base mt-6 mb-2; }
    .prose p { @apply mb-4 leading-relaxed; }
    .prose a { @apply text-primary hover:underline; }
    .prose code {
      @apply font-mono text-[0.88em] bg-surface-alt px-1.5 py-0.5 rounded;
    }
    .prose pre {
      @apply bg-surface-alt border-l-[3px] border-l-primary px-5 py-4 overflow-x-auto my-4 rounded-r leading-relaxed;
    }
    .prose pre code { @apply bg-transparent p-0; }
    .prose blockquote {
      @apply border-l-[3px] border-dashed border-l-primary py-2 px-4 my-4 text-muted bg-surface-alt rounded-r;
    }
    .prose blockquote p:last-child { @apply mb-0; }
    .prose ul, .prose ol { @apply mb-4 ml-6; }
    .prose li { @apply my-1; }
    .prose img { @apply max-w-full rounded; }
    .prose table { @apply w-full border-collapse my-6; }
    .prose th, .prose td { @apply px-3 py-2 border border-border text-left text-sm; }
    .prose thead { @apply bg-surface-alt; }

    /* Timeline */
    .timeline-item {
      @apply flex gap-5 py-5 border-l-2 border-border ml-2 pl-6 relative;
    }
    .timeline-item::before {
      content: "";
      @apply absolute -left-[5px] top-7 w-2 h-2 bg-primary rounded-full;
    }

    /* Pagination */
    nav.pagination { @apply my-6; }
    nav.pagination .pagination-list {
      @apply list-none p-0 m-0 flex gap-2 flex-wrap items-center justify-center;
    }
    nav.pagination a {
      @apply inline-block px-3 py-1.5 rounded border border-border text-sm no-underline text-muted
             hover:text-primary hover:border-primary transition-colors;
    }
    .pagination-current span {
      @apply inline-block px-3 py-1.5 rounded border border-primary bg-primary text-white text-sm font-medium;
    }
    .pagination-disabled span {
      @apply inline-block px-3 py-1.5 rounded border border-border text-muted opacity-50 text-sm;
    }

    /* Section list (taxonomy content) */
    ul.section-list { @apply list-none p-0 my-6 space-y-2; }
    ul.section-list li {
      @apply p-3 bg-surface-alt rounded border border-border;
    }
    ul.section-list li a { @apply font-medium text-primary; }

    /* Alert shortcode */
    .alert {
      @apply py-3 px-4 border border-border border-l-4 border-l-primary bg-surface-alt rounded-r my-4 text-sm;
    }

    /* Version badge */
    .version-badge {
      @apply inline-block font-mono text-xs font-semibold px-3 py-0.5 bg-primary text-white rounded-full;
    }
  </style>

  {{ highlight_css }}
  {{ auto_includes_css }}
</head>
<body class="font-sans text-gray-900 bg-surface leading-relaxed">
  <header class="border-b-2 border-primary bg-surface py-4">
    <div class="max-w-3xl mx-auto px-6 flex items-center justify-between">
      <a href="{{ base_url }}/" class="font-mono text-xl font-bold text-gray-900 no-underline hover:text-primary transition-colors"><span class="text-primary">&gt;_</span> {{ site.title }}</a>
      <nav class="flex gap-6">
        <a href="{{ base_url }}/log/" class="font-mono text-sm text-muted no-underline hover:text-primary transition-colors">Log</a>
        <a href="{{ base_url }}/tags/" class="font-mono text-sm text-muted no-underline hover:text-primary transition-colors">Tags</a>
        <a href="{{ base_url }}/about/" class="font-mono text-sm text-muted no-underline hover:text-primary transition-colors">About</a>
      </nav>
    </div>
  </header>
