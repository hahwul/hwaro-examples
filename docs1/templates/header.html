<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}</title>
  {% if page.description %}<meta name="description" content="{{ page.description }}">{% endif %}
  {{ og_all_tags }}

  <!-- Google Fonts: Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: '#22d3ee', // Cyan 400
            'primary-dark': '#06b6d4', // Cyan 500
            'primary-light': '#67e8f9', // Cyan 300
            'primary-glow': 'rgba(34, 211, 238, 0.15)',
            surface: '#09090b', // Zinc 950
            'surface-alt': '#18181b', // Zinc 900
            'surface-hover': '#27272a', // Zinc 800
            border: '#27272a', // Zinc 800
            muted: '#a1a1aa', // Zinc 400
            'text-main': '#e4e4e7', // Zinc 200
            'text-head': '#fafafa', // Zinc 50
            'method-get': '#4ade80', // Green 400
            'method-post': '#60a5fa', // Blue 400
            'method-patch': '#fbbf24', // Amber 400
            'method-delete': '#f87171', // Red 400
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
            mono: ['ui-monospace', 'SFMono-Regular', 'Menlo', 'Monaco', 'Consolas', 'monospace'],
          },
          boxShadow: {
            'glow': '0 0 20px -5px var(--tw-shadow-color)',
          }
        },
      },
    }
  </script>

  <style type="text/tailwindcss">
    body {
      @apply bg-surface text-text-main antialiased selection:bg-primary/20 selection:text-primary-light;
    }

    /* Scrollbar */
    ::-webkit-scrollbar {
      @apply w-1.5 h-1.5;
    }
    ::-webkit-scrollbar-track {
      @apply bg-transparent;
    }
    ::-webkit-scrollbar-thumb {
      @apply bg-zinc-700 rounded-full hover:bg-zinc-600;
    }

    /* Prose: markdown rendered content */
    .prose h1, .prose h2, .prose h3, .prose h4 {
      @apply font-semibold text-text-head tracking-tight scroll-mt-24;
    }
    .prose h1 { @apply text-3xl mt-0 mb-6; }
    .prose h2 { @apply text-2xl mt-12 mb-4 border-b border-border pb-2; }
    .prose h3 { @apply text-lg mt-8 mb-3; }
    .prose p { @apply mb-5 leading-7 text-zinc-300; }
    .prose a {
      @apply text-primary-light no-underline border-b border-primary/30 transition-colors hover:border-primary hover:text-primary;
    }
    .prose code {
      @apply text-[0.85em] bg-surface-alt border border-border px-1.5 py-0.5 rounded-md font-mono text-zinc-200;
    }
    .prose pre {
      @apply bg-[#121214] border border-border px-5 py-4 overflow-x-auto my-6 rounded-xl shadow-lg leading-relaxed;
    }
    .prose pre code { @apply bg-transparent border-0 p-0 text-inherit; }

    .prose blockquote {
      @apply border-l-2 border-primary bg-primary/5 py-3 px-5 my-6 rounded-r-lg text-zinc-300 not-italic;
    }
    .prose blockquote p:last-child { @apply mb-0; }

    .prose ul, .prose ol { @apply mb-6 ml-6 space-y-2; }
    .prose li { @apply text-zinc-300 pl-1 marker:text-zinc-500; }

    .prose img { @apply max-w-full rounded-xl border border-border shadow-md my-8; }

    .prose table { @apply w-full border-collapse my-8 rounded-lg overflow-hidden border border-border block overflow-x-auto md:table; }
    .prose th { @apply px-4 py-3 bg-surface-alt text-left text-xs font-semibold text-zinc-400 uppercase tracking-wider border-b border-border; }
    .prose td { @apply px-4 py-3 border-b border-border text-sm text-zinc-300; }
    .prose tr:last-child td { @apply border-b-0; }
    .prose tbody tr:hover { @apply bg-surface-alt/50; }

    /* Method badge */
    .method-badge {
      @apply inline-flex items-center justify-center text-[10px] font-bold px-2 py-0.5 rounded-full font-mono uppercase tracking-wide border border-transparent;
    }
    .method-get { @apply bg-green-500/10 text-method-get border-green-500/20; }
    .method-post { @apply bg-blue-500/10 text-method-post border-blue-500/20; }
    .method-patch { @apply bg-amber-500/10 text-method-patch border-amber-500/20; }
    .method-delete { @apply bg-red-500/10 text-method-delete border-red-500/20; }

    /* Param row */
    .param-row {
      @apply flex flex-col sm:flex-row gap-1 sm:gap-6 py-4 border-b border-border text-sm transition-colors hover:bg-white/[0.02];
    }
    .param-row:last-child { @apply border-b-0; }
    .param-name { @apply font-mono font-medium text-primary-light sm:w-40 shrink-0; }
    .param-type { @apply text-xs text-zinc-500 font-mono sm:w-24 shrink-0 pt-0.5; }
    .param-required { @apply text-[10px] font-bold text-red-400 bg-red-400/10 px-1.5 py-0.5 rounded uppercase tracking-wider ml-2; }
    .param-desc { @apply text-zinc-400 flex-1 leading-relaxed; }

    /* Response block */
    .response-block {
      @apply my-6 rounded-xl border border-border overflow-hidden bg-surface-alt;
    }
    .response-header {
      @apply px-4 py-2 text-xs font-semibold flex items-center gap-2 border-b border-border bg-white/[0.02];
    }
    .response-2xx { @apply text-green-400; }
    .response-4xx { @apply text-red-400; }
    .response-5xx { @apply text-amber-400; }
    .response-body {
      @apply p-4 bg-[#0c0c0e] text-zinc-300 text-sm font-mono overflow-x-auto;
    }

    /* Sidebar nav */
    .sidebar-link {
      @apply block py-1.5 px-3 rounded-md text-sm transition-all duration-200 relative;
    }
    .sidebar-link.active {
      @apply text-primary-light bg-primary/10 font-medium;
    }
    .sidebar-link:not(.active) {
      @apply text-muted hover:text-zinc-200 hover:bg-white/5;
    }

    /* Section card grid */
    .doc-card {
      @apply block p-6 bg-surface-alt rounded-xl border border-border transition-all duration-300 no-underline;
    }
    .doc-card:hover {
      @apply border-primary/50 shadow-glow shadow-primary/10 -translate-y-1 bg-surface-hover;
    }
    .doc-card h3 { @apply text-lg font-semibold mb-2 mt-0 text-zinc-100 group-hover:text-primary-light transition-colors; }
    .doc-card p { @apply text-sm text-zinc-400 m-0 leading-relaxed; }

    /* Pagination */
    nav.pagination { @apply my-10 border-t border-border pt-8; }
    nav.pagination .pagination-list {
      @apply list-none p-0 m-0 flex gap-2 flex-wrap items-center justify-center;
    }
    nav.pagination a {
      @apply inline-flex items-center px-4 py-2 rounded-lg border border-border text-sm no-underline text-muted
             hover:text-primary-light hover:border-primary/50 hover:bg-primary/5 transition-all;
    }
    .pagination-current span {
      @apply inline-flex items-center px-4 py-2 rounded-lg border border-primary bg-primary/10 text-primary-light text-sm font-medium;
    }
    .pagination-disabled span {
      @apply inline-flex items-center px-4 py-2 rounded-lg border border-border text-zinc-700 opacity-50 text-sm;
    }

    /* Section list (taxonomy content) */
    ul.section-list { @apply list-none p-0 my-6 space-y-3; }
    ul.section-list li {
      @apply p-0;
    }
    ul.section-list li a {
      @apply flex items-center p-4 bg-surface-alt rounded-lg border border-border font-medium text-zinc-200 hover:border-primary/50 hover:bg-surface-hover transition-all no-underline;
    }

    /* TOC */
    .toc-container ul { @apply list-none p-0 m-0 space-y-2; }
    .toc-container li { @apply text-sm; }
    .toc-container a {
      @apply text-zinc-500 no-underline hover:text-primary-light transition-colors block border-l border-border pl-4 -ml-[1px];
    }
    .toc-container a:hover { @apply border-l-primary; }
    .toc-container ul ul { @apply ml-0 mt-2; }
  </style>

  {{ highlight_css }}
  {{ auto_includes_css }}
</head>
<body class="font-sans text-text-main bg-surface leading-relaxed min-h-screen flex flex-col">
  <header class="sticky top-0 z-50 w-full border-b border-border/50 bg-surface/80 backdrop-blur-md supports-[backdrop-filter]:bg-surface/60">
    <div class="max-w-7xl mx-auto px-6 h-16 flex items-center justify-between">
      <div class="flex items-center gap-6">
        <a href="{{ base_url }}/" class="text-xl font-bold text-white no-underline tracking-tight hover:opacity-90 transition-opacity">
          Pulse <span class="text-primary font-extrabold">API</span>
        </a>
        <div class="hidden md:flex items-center gap-2">
          <span class="text-[10px] bg-primary/10 text-primary-light px-2 py-0.5 rounded-full font-mono border border-primary/20">v2.1</span>
        </div>
      </div>
      <nav class="hidden md:flex items-center gap-8">
        <a href="{{ base_url }}/guides/" class="text-zinc-400 text-sm font-medium no-underline hover:text-primary-light transition-colors">Guides</a>
        <a href="{{ base_url }}/reference/" class="text-zinc-400 text-sm font-medium no-underline hover:text-primary-light transition-colors">Reference</a>
        <a href="{{ base_url }}/changelog/" class="text-zinc-400 text-sm font-medium no-underline hover:text-primary-light transition-colors">Changelog</a>
      </nav>
      <!-- Mobile menu button placeholder -->
      <button class="md:hidden text-zinc-400 hover:text-white">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
        </svg>
      </button>
    </div>
  </header>
